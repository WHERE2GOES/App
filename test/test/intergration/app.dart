import 'package:data/di/configure_dependencies.dart';
import 'package:design/theme/theme_colors.dart';
import 'package:flutter/material.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:go_router/go_router.dart';
import 'package:kakao_flutter_sdk_user/kakao_flutter_sdk_user.dart';
import 'package:login/apps/login_app.dart';
import 'package:navigation/apps/navigation_app.dart';

void main() async {
  configureDependencies();
  
  await dotenv.load(fileName: ".env");
  String appKey = dotenv.env["KAKAO_APP_KEY"]!;
  KakaoSdk.init(nativeAppKey: appKey);

  final router = GoRouter(
    routes: [
      GoRoute(path: '/', builder: (context, state) => _TestSplashScreen()),
      GoRoute(
        path: '/login',
        builder: (context, state) => LoginApp(
          onLoginSucceeded: () {
            context.go("/home");
          },
        ),
      ),
      GoRoute(
        path: '/home',
        builder: (context, state) => _TestCourseSelectionScreen(),
        routes: [
          GoRoute(
            path: '/navigation',
            builder: (context, state) {
              final latlngs = state.uri.queryParameters["latlngs"];

              return NavigationApp(initialCoursePositionString: latlngs);
            },
          ),
        ],
      ),
    ],
  );

  runApp(
    MaterialApp.router(
      theme: ThemeData(fontFamily: "Pretendard"),
      routerConfig: router,
      builder: (context, child) => Scaffold(body: child),
    ),
  );
}

class _TestSplashScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    WidgetsBinding.instance.addPostFrameCallback((_) {
      context.go("/login");
    });

    return Container(color: ThemeColors.pastelOrange);
  }
}

class _TestCourseSelectionScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Container(
      color: ThemeColors.pastelGreen,
      child: SizedBox.expand(
        child: Center(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            spacing: 10,
            children:
                <({String latlngs, String title})>[
                  (
                    latlngs:
                        "37.55737548,126.603468n37.55563357,126.6057874n37.55452492,126.6073606n37.55490635,126.6075829n37.55520119,126.6078804n37.55535694,126.6083086n37.5553483,126.6088131n37.55525338,126.6093161n37.55502871,126.6100098n37.55529303,126.6120167n37.55582862,126.6169696n37.55673135,126.6219347n37.56003322,126.6205404n37.56046596,126.6221566n37.56064324,126.6224731n37.5608358,126.6224928n37.56358812,126.6213212n37.56443593,126.6208207n37.56502182,126.6203118n37.56526792,126.6213076n37.56713167,126.6280156n37.56731616,126.6290147n37.56862093,126.6340634n37.56893806,126.6351448n37.56900507,126.6352249n37.56918001,126.6353063n37.56920971,126.635355n37.56983101,126.6375217n37.57016365,126.6393785n37.57025916,126.6403801n37.57039695,126.6429887n37.57061191,126.6484948n37.57150633,126.6602689n37.57156009,126.6613775n37.5715223,126.6614464n37.57152019,126.6615403n37.57158268,126.6626426n37.57165282,126.6628205n37.5717181,126.6632192n37.57177661,126.6638276n37.57175494,126.6656034n37.57169328,126.6666681n37.57138091,126.6702527n37.57121058,126.6708248n37.57113888,126.672023n37.57116348,126.6726607n37.57103047,126.6741191n37.57102366,126.6746399n37.57083176,126.674999n37.57065666,126.676551n37.57044278,126.680092n37.57069693,126.6805574n37.57070892,126.6833527n37.57082961,126.6858686n37.57087943,126.6861369n37.57090029,126.6886307n37.57100763,126.6924011n37.57234836,126.721549n37.57232642,126.7226989n37.57274063,126.7324703n37.5730362,126.7367977n37.57298386,126.7372642n37.57304635,126.7400868n37.573123,126.7416785n37.57313977,126.7438619n37.57324758,126.7460061n37.57328515,126.746256n37.57328948,126.746934n37.57340028,126.749558n37.57349352,126.7511669n37.5735676,126.751938n37.57380152,126.7534795n37.57368606,126.7540404n37.57369799,126.7541759n37.57385282,126.7545916n37.57384197,126.7555027n37.57381306,126.7557464n37.57378058,126.7558614n37.57347407,126.7564069n37.57345004,126.7565462n37.57351358,126.7574079n37.57369392,126.7585258n37.57412188,126.7599678n37.57434778,126.7604663n37.57499101,126.76143n37.5751182,126.7615227n37.57545326,126.7616654n37.5755429,126.7617271n37.57561828,126.7618333n37.57628794,126.7630419n37.57743962,126.7648873n37.57864488,126.7664518n37.58005394,126.7681581n37.58189658,126.7706004n37.58221519,126.7711086n37.58288161,126.7718667n37.58414188,126.7734595n37.58749758,126.7779277n37.59107988,126.7826219n37.59242987,126.7843215n37.59245148,126.7846899n37.59293791,126.7857268n37.59164853,126.7878277n37.59082411,126.7892498n37.59065656,126.7896131n37.59059665,126.790082n37.59062407,126.7903461n37.59082724,126.790998n37.59291663,126.7960821n37.59358329,126.7979431n37.59368286,126.79814n37.59473345,126.7974851n37.5968703,126.7965443n37.59703254,126.7965243n37.59723949,126.796578n37.59763798,126.7969761n37.59876086,126.8000577n37.59867711,126.8001093",
                    title: "인천부터 서울까지",
                  ),
                  (
                    latlngs:
                        "38.1214547,127.761168n38.1199394,127.7616988n38.1181278,127.7617322n38.1162711,127.7617712n38.1151131,127.7616758n38.1132834,127.7617492n38.1114221,127.7618452n38.1103359,127.761904n38.1093574,127.7621857n38.1078614,127.7621462n38.1065498,127.7622327n38.104667,127.7618667n38.1033431,127.76144n38.1015253,127.7601903n38.1002709,127.7588856n38.0997894,127.7585475n38.0980655,127.7576461n38.0962694,127.7567616n38.0944462,127.7559056n38.0935169,127.7555066n38.0918475,127.7552009n38.0909195,127.7550893n38.089992,127.754679n38.0890559,127.7541135n38.0885544,127.7538872n38.0876196,127.7527379n38.0866981,127.7516514n38.0861924,127.7508651n38.0854982,127.748825n38.0851131,127.7467997n38.0850642,127.7452054n38.0852221,127.7442708n38.0857525,127.7427081n38.08633,127.7410702n38.0870274,127.739419n38.0878284,127.7377716n38.088701,127.7363113n38.091331,127.7326591n38.0931835,127.7302016n38.0937394,127.7293594n38.0942958,127.7282664n38.0950188,127.7272536n38.0962389,127.7255239n38.0970658,127.7243403n38.0984402,127.7219608n38.0992617,127.7212448n38.0998539,127.7202999n38.1001931,127.7196337n38.1006008,127.7184944n38.1011839,127.7175267n38.1018185,127.715504n38.10174,127.7141066n38.1018632,127.7132173n38.101899,127.7108622n38.1026458,127.7090451n38.1028939,127.7089318n38.1030161,127.7086127n38.1029446,127.7083046n38.1026247,127.7082295n38.1024157,127.7041115n38.1023047,127.7031246n38.1021428,127.700324n38.1014436,127.6981037n38.1007563,127.6967845n38.1003382,127.6962132n38.0984866,127.6931345n38.096585,127.6903182n38.0947079,127.6890646n38.0937265,127.6884576n38.0926745,127.6868811n38.092211,127.6864865n38.0903694,127.6855467n38.0891897,127.6849222n38.0883614,127.6843442n38.0871184,127.6838907n38.0854693,127.6837497n38.0836803,127.6837167n38.0818149,127.6835353n38.0800352,127.683377n38.0781926,127.6830417n38.0763456,127.6826266n38.0757145,127.6827505n38.0738988,127.6825407n38.0734526,127.6825738n38.0730152,127.6827495n38.0711765,127.6828076n38.0706492,127.6828519n38.0700771,127.6826681n38.0693293,127.6825123n38.0683113,127.6822247n38.0671627,127.6818742n38.0659066,127.6811187n38.0646056,127.6802776n38.0628502,127.6788711n38.0610406,127.6775558n38.0591904,127.6763031n38.0587224,127.6758802n38.0585475,127.6752814n38.0585303,127.6747171n38.0586482,127.6742671n38.0588157,127.6736919n38.0588032,127.6730022n38.0586654,127.6717081n38.0585054,127.6701974n38.0586564,127.6686475n38.0584681,127.667946n38.0582344,127.66751n38.0579682,127.6676918n38.0580903,127.6692845n38.0581028,127.6700255n38.0579639,127.6707034n38.0570553,127.6726424n38.0561783,127.6745325n38.055426,127.6761288n38.0550963,127.6766159n38.0547732,127.6768944n38.0545234,127.6769872n38.053649,127.6771504n38.0527519,127.6773021n38.0518793,127.6774402n38.0510392,127.6775407n38.0501337,127.6773129n38.0492527,127.6770258n38.048742,127.6767944n38.0481723,127.6762653n38.0473201,127.6753971n38.0470429,127.6751206n38.0463821,127.6739987n38.0463869,127.6738392n38.0464593,127.6736205n38.046679,127.6731674n38.0467604,127.6729226n38.0466726,127.6726181n38.0465269,127.6724183n38.045608,127.6721084n38.0453558,127.6719938n38.0451623,127.6717996n38.0449394,127.6714082n38.0441866,127.6703295n38.0440606,127.6701673n38.0437459,127.6696937n38.0434146,127.6693738n38.0431392,127.6685184n38.0429368,127.6682045n38.0426957,127.6679362n38.0423405,127.6673712n38.0422397,127.6672798n38.0421903,127.6671509n38.0687798,127.6823661n38.0687592,127.6828221n38.0689967,127.6848486n38.0691789,127.686477n38.0692403,127.6875146n38.0692171,127.6879649n38.0690023,127.6886963n38.0687366,127.6897216n38.0708495,127.690052n38.0717964,127.6897238n38.0722654,127.689554n38.0759515,127.6895977n38.0763751,127.689633n38.0787169,127.6905627n38.0794911,127.6911006n38.0831763,127.6917031n38.0847081,127.6919352n38.0865357,127.6931373n38.0881476,127.6940196n38.0877515,127.6937335n38.0899918,127.6960429n38.0903436,127.695907n38.0909383,127.6959885n38.0921451,127.6965163n38.0944947,127.698142n38.0945783,127.698254n38.0948755,127.698411n38.0961684,127.6996953n38.0972906,127.7012175n38.0979567,127.7027795n38.0979696,127.7031103n38.0981299,127.7032043n38.0982063,127.7033219n38.0983452,127.7037614n38.0983915,127.7041117n38.0986492,127.7052016n38.098812,127.7048542n38.0988905,127.7047917n38.0991558,127.7076836n38.099104,127.7079321n38.0991011,127.7080371n38.0991257,127.708377n38.0990937,127.7086586n38.099118,127.7101961n38.0991041,127.7104322n38.0992672,127.7124342n38.0993342,127.7137746n38.099302,127.7141257n38.0988055,127.7160027n38.0987348,127.7162283n38.0979433,127.7177942n38.0970103,127.7193733n38.0960747,127.7208166n38.0953607,127.7219093n38.0953426,127.7219378n38.0947233,127.7215025n38.0947009,127.7214739n38.0946418,127.7217247n38.0946624,127.7218182n38.0949277,127.7221327n38.0951185,127.7222279n38.0951661,127.7223136n38.095193,127.722422n38.095163,127.7225725n38.094027,127.7241884n38.0939502,127.7243n38.0935433,127.724991n38.0927303,127.7259499n38.0924834,127.726371n38.09233,127.7264732n38.0920371,127.7264552n38.0919362,127.7264686n38.0917163,127.7269104n38.091651,127.7271269n38.0915291,127.7272314n38.0914568,127.7273224n38.0907607,127.7284492n38.0905936,127.7286312n38.090541,127.7287964n38.0904868,127.7288703n38.0904596,127.7289592n38.0902519,127.7291547n38.090062,127.7294711n38.0898881,127.7298948n38.0897391,127.7300711n38.0895329,127.7304126n38.0891898,127.7307536n38.0891761,127.7308254n38.0889098,127.7310207n38.0887159,127.7310862n38.0884587,127.7312508n38.0884452,127.7312678n38.0883981,127.7314011n38.0883439,127.7314579n38.0882625,127.7315923n38.0881467,127.7318222n38.0880861,127.7319053n38.0879748,127.7321581n38.0878662,127.7323516n38.0876749,127.7324935n38.0875413,127.7325672n38.0874917,127.7326275n38.0874356,127.7327437n38.0873049,127.7327467n38.0872886,127.7327637n38.0872162,127.7329231n38.0872008,127.7329425n38.0871603,127.7329401n38.0870473,127.7330994n38.0870201,127.7331871n38.0869631,127.7332987n38.0869251,127.7333521n38.0868319,127.7335662n38.086803,127.7335912n38.0867326,127.7336423n38.0866357,127.7338872n38.0865767,127.734058n38.0865107,127.7341718n38.0864475,127.7342458n38.0864231,127.7342571n38.0863618,127.7342546n38.0863212,127.7342739n38.0863239,127.7343058n38.0864019,127.734525n38.0864133,127.7346539n38.0860235,127.7357724n38.0855581,127.7364209n38.0852505,127.7369707n38.0844442,127.7390377n38.083737,127.741105n38.0833254,127.7426887n38.0829745,127.7445769n38.0829107,127.7449621n38.0825514,127.7456702n38.0822125,127.746108n38.0822473,127.7475654n38.0824454,127.7488968n38.0827735,127.7501864n38.0832983,127.7513341n38.08382,127.7517977n38.0847254,127.7532319n38.0856301,127.7545897n38.0863385,127.7554098n38.0872254,127.7557949n38.0879745,127.7561567n38.0886248,127.7567725n38.0903002,127.7580157n38.0912317,127.7586085n38.0922738,127.759317n38.0924183,127.7591863n38.0930604,127.7569899n38.0934733,127.7556684n38.0935034,127.7555089n38.1026184,127.7082352n38.1024513,127.70848n38.1013833,127.7084313n38.1002973,127.7084259n38.0992852,127.7084139n38.0991212,127.7083793",
                    title: "화천군 강가",
                  ),
                  (
                    latlngs:
                        "37.48164116,130.9093943n37.48164116,130.9093943n37.48351703,130.9072438n37.48526292,130.9028885n37.48519895,130.9012417n37.4848887,130.9004163n37.48510143,130.8995378n37.48428359,130.8981308n37.481117,130.8938397n37.48043306,130.8943766n37.47848649,130.8935901n37.47817736,130.8933034n37.47622305,130.8931891n37.47556274,130.8942172n37.47491672,130.8939617n37.47397255,130.8897948n37.47195728,130.8873609n37.47031866,130.8832283n37.46504305,130.8780844n37.46058778,130.8757672n37.45816588,130.8750359n37.45417835,130.8753845n37.45343832,130.8742353n37.4539773,130.873026n37.45856764,130.8697788n37.46053599,130.8636627n37.46070359,130.8578876n37.46170904,130.8561691n37.46182915,130.8540339n37.46378661,130.8503947n37.46372289,130.8464523n37.46431729,130.8450329n37.46282493,130.8423049n37.46331341,130.8404351n37.46565184,130.8387707n37.46742662,130.8335042n37.46684111,130.8321522n37.47063917,130.8294373n37.47280525,130.8218671n37.47379955,130.8124837n37.47656281,130.809371n37.48096552,130.8083797n37.48332948,130.8059462n37.4842555,130.8068964n37.48853656,130.802964n37.49415669,130.8069388n37.49494082,130.8095965n37.49681109,130.8074527n37.50444359,130.8100136n37.50503607,130.8093594n37.50930134,130.8119578n37.50931486,130.8140484n37.5128531,130.8085874n37.51534071,130.8101335n37.51566229,130.8154041n37.51725342,130.8164241n37.51899205,130.814708n37.52067075,130.8165771n37.51994552,130.8184459n37.52222599,130.820762n37.52292875,130.8195636n37.52368741,130.8211539n37.52425389,130.8196307n37.52667103,130.8217419n37.52629273,130.8276197n37.52732696,130.8305011n37.5287407,130.8312815n37.53041956,130.8342769n37.53211243,130.8392725n37.53347696,130.8405148n37.53505172,130.8450626n37.53507103,130.8477857n37.53409996,130.850367n37.53472997,130.8590692n37.5357129,130.8618326n37.53670419,130.8676382n37.53987971,130.87138n37.54034885,130.8731309n37.54145911,130.8733694n37.54278667,130.8754966n37.54294626,130.880295n37.54210417,130.8845151n37.5421595,130.8869071n37.5406423,130.8891062n37.54116067,130.8930827n37.54606887,130.8970583n37.54892721,130.9032613n37.54847015,130.9065347n37.54628678,130.9088578n37.54418644,130.9081509n37.54122139,130.9109105n37.54128805,130.9167146n37.54030033,130.9161553n37.53853933,130.9131286n37.5370481,130.9099065n37.52882036,130.9069819n37.52704168,130.9069944n37.51824423,130.9106661n37.50719295,130.9124336n37.50312781,130.9140588n37.50055135,130.915059n37.49986367,130.9142973n37.499818,130.9126759n37.49829807,130.9116975n37.49690848,130.9097667n37.494995,130.9093042n37.49236255,130.9102299",
                    title: "울릉도 한바퀴",
                  ),
                  (
                    latlngs:
                        "35.81860208,126.4771906n35.82159912,126.4766959n35.82176461,126.4751338n35.82351817,126.4715937n35.82412578,126.4663487n35.82315236,126.4608448n35.82039391,126.4546244n35.8161588,126.4535143n35.81446744,126.4511396n35.8140047,126.4460056n35.80952332,126.4395116n35.80379634,126.4360638n35.80173731,126.4324071n35.80384982,126.4212162n35.80884393,126.414588n35.80833471,126.415302n35.81058993,126.4163297n35.81253307,126.4166583n35.813748,126.4149664n35.81436739,126.4090801n35.81276538,126.4063372n35.81115481,126.4070955n35.81089937,126.4078317n35.81037105,126.4077582n35.81101792,126.4027249n35.81111638,126.398271n35.81180509,126.3983248n35.81240813,126.3972072n35.81088759,126.3961619n35.81036148,126.3966762n35.80955235,126.3956212n35.810235,126.3948324n35.81243553,126.3972219n35.81401722,126.3968642n35.81486549,126.3965361n35.81419269,126.4101005n35.81654143,126.4118237n35.81854338,126.4126154n35.82321336,126.4132982n35.82492658,126.4119536n35.82487392,126.4112134n35.82457461,126.4108887n35.82474049,126.4103848n35.82473081,126.4083459n35.82458926,126.4079141n35.82589782,126.4068153n35.82781413,126.4042472n35.82778082,126.4025752n35.82325739,126.4131868n35.82493672,126.414885n35.8250048,126.4162786n35.82642786,126.4164725",
                    title: "고군산군도",
                  ),
                ].map((e) {
                  return GestureDetector(
                    onTap: () {
                      context.push("/home/navigation?latlngs=${e.latlngs}");
                    },
                    child: Container(
                      alignment: Alignment.center,
                      width: 200,
                      height: 70,
                      color: Colors.cyanAccent,
                      child: Text(e.title),
                    ),
                  );
                }).toList(),
          ),
        ),
      ),
    );
  }
}
